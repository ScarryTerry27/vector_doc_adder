# Платформа цифрового надзора за строительными объектами

## Видение проекта
Платформа объединяет документооборот строительной площадки, контроль качества и аналитику инцидентов в едином LLM-ориентированном бэкенде. Сегодня реализован веб-сервис для загрузки, разметки и публикации технической документации, на базе которого легко достраиваются мобильные сценарии и мультимедийные проверки.

## Ключевые возможности (MVP)
- **Цифровой архив объектов.** Пользователи загружают PDF-документы, проверяют извлечённые метаданные и сохраняют их в единый каталог, что обеспечивает актуальную базу знаний по объектам и этапам стройки.【F:frontend/add_document.py†L1-L205】【F:frontend/add_document.py†L206-L314】
- **Умная разметка документов.** LLM-обработчик извлекает название, тип, даты, коды классификатора и краткое описание из первых страниц документа, экономя время инженеров и инспекторов.【F:services/meta_parser_ds.py†L1-L160】【F:services/meta_parser_ds.py†L161-L240】
- **Контроль публикаций.** Админ-интерфейс позволяет просматривать, искать и верифицировать загруженные материалы, фиксируя автора загрузки и статус документа.【F:main.py†L1-L79】【F:frontend/view_documents.py†L1-L40】
- **Управление жизненным циклом.** Встроенные инструменты поиска и пакетного удаления помогают оперативно актуализировать базу документов при изменениях на площадке.【F:frontend/view_documents.py†L1-L40】【F:frontend/delete_document.py†L1-L70】
- **Готовность к векторному поиску.** Каждый документ проходит предобработку и сохраняется как в MongoDB, так и в векторном хранилище Weaviate/Pinecone, что открывает семантический поиск и чат с проектной документацией.【F:frontend/add_document.py†L206-L314】【F:services/db_api_weaviate.py†L1-L160】【F:services/db_api_weaviate.py†L161-L240】

## Архитектура
- **Интерфейс оператора (Streamlit).** Меню объединяет сценарии загрузки, просмотра и удаления документов; для каждой сессии создаётся изолированное рабочее пространство во временном хранилище.【F:main.py†L1-L79】【F:backend/utils.py†L1-L24】
- **Сервис метаданных.** Модуль `Meta_parser` подключает LlamaParse для извлечения текста и OpenAI/DeepSeek для аналитики; прогресс отображается в режиме реального времени для прозрачности обработки.【F:services/meta_parser_ds.py†L1-L160】【F:frontend/add_document.py†L58-L133】
- **Слой хранения.** MongoDB фиксирует структуру документа и автора, векторное хранилище индексирует разбитые на чанки страницы через LlamaIndex, обеспечивая быстрый доступ к знаниям на следующих этапах разработки.【F:services/db_api_weaviate.py†L1-L160】【F:services/db_api_weaviate.py†L161-L240】
- **Модуль предобработки.** Перед индексацией документы конвертируются в Markdown с якорями и размеченными заголовками, что повышает качество ответов LLM и последующего поиска.【F:frontend/add_document.py†L206-L314】
- **Конфигурационный слой.** Переменные окружения управляют подключением к MongoDB, API-бекенду и временными каталогами, что облегчает деплой в облаке и на локальных серверах.【F:config.py†L1-L12】

## Типовой поток данных
1. Инженер загружает пакет PDF-документов через веб-интерфейс, файлы сохраняются во временную область пользователя.【F:frontend/add_document.py†L1-L93】
2. После запуска обработки LLM извлекает текст, рассчитывает метаданные и отображает прогресс на экране.【F:frontend/add_document.py†L94-L160】
3. Пользователь ревьюит и при необходимости корректирует автоматически сгенерированную информацию, включая коды классификатора и аннотации.【F:frontend/add_document.py†L132-L205】
4. Подтверждённые документы сохраняются в MongoDB и индексируются во векторном хранилище для будущих запросов LLM-сервиса.【F:frontend/add_document.py†L206-L314】

## Дорожная карта
- Интеграция загрузки фото- и видеоматериалов для актов приёмки и расследования инцидентов (мобильный клиент в разработке).
- Геотегирование инспекторов и прорабов при подаче отчётов для подтверждения присутствия на объекте.
- Расширенная админ-панель с управлением ролями, аудитом действий и дашбордами по статусу документации.
- LLM-ассистент для ответов на вопросы по проектам, формирования чек-листов и генерации предписаний.

## Почему это важно на питче
- Показаны готовые backend-компоненты, подтверждающие жизнеспособность подхода и готовность к масштабированию.
- Архитектура уже учитывает мультимодальные сценарии и мобильное расширение, что сокращает time-to-market следующей итерации.
- Использование векторного поиска и LLM снижает нагрузку на специалистов и повышает качество контроля на стройке.
